# gBizConnect Portal 利用者向けマニュアル　　

## 1. はじめに　　

### 1.1. 本書の目的及び位置づけ　　
　本書は、gBizConnect Portalの円滑な利用を目的として、gBizConnect Portalの利用方法を記載します。　　
### 1.2. 本書の対象読者及び利用目的　　
　本書の対象者及び利用目的は、以下のとおりです。　　

|#|対象者|利用目的|
|:-:|:-|:-|
|1|電子申請システム開発者<br>（開発者含む）|gBizConnectを介して法人データを取得する電子申請システムの開発者が、gBizConnect Portalで実施する作業の流れや操作方法を把握する。|
|2|法人データストア開発者<br>（開発者含む）|gBizConnectを介して法人データを提供する法人データストアの開発者が、gBizConnect Portalで実施する作業の流れや操作方法を把握する。|　　

### 1.3. 動作確認済み環境　　
　gBIzConnect Portalにおいて、動作確認済みの環境（ブラウザ）は、以下のとおりです。<br>
※他のブラウザ、バージョンに関しては、動作確認未実施であるため、一部表示・挙動が異なる場合があります　　
* 　Google Chrome	（ver：79.0.3945.130）
* 　Apple Safari	（ver：9.1.2）　　


## 2. アカウントを登録する　　
　[対象：電子申請システム、法人データストア]<br>
gBizConnect Portalへのログインに必要となるアカウント情報を登録します。　　
1. 「トップ」画面にて、「ログイン／新規登録はこちら」ボタンを押下する　　
2. 「ログイン」画面にて、「登録」ボタンを押下する　　
3. 「アカウント新規登録」画面にて、各情報を入力し、「登録」ボタンを押下する　※　
4. 「トップメニュー」画面にて、ログイン出来たことを確認する

※パスワード要件：英字（大）、英字（小）、数字、記号を各1文字以上含み、15文字以上であること


## 3. システムを登録する　　
### 3.1. システムを登録する　　
　[対象：電子申請システム、法人データストア]<br>gBizConnectに接続するシステムの情報を登録します。<br>
なお、システム登録申請は、基盤管理者からの承認をもって完了となります。　　
1. 「トップメニュー」画面にて、「システム/サービス管理機能」ボタンを押下する　　
2. 「システム管理」画面にて、「システム登録」ボタンを押下する　　
3. 「システム情報登録申請」画面にて、gBizConnectに接続するシステムに係る以下の項目を入力し、「申請内容の確認」ボタンを押下する　　

|#|項目名|区分|概要|
|:-:|:-|:-|:-|
|1|システム名|必須|システムの名称を入力する|
|2|システムURL|必須|システムのURLを入力する|
|3|システム概要|任意|システムの概要を入力する|
|4|運営者名（レベル1）|必須|システムの運用者名（責任者相当）を入力する|
|5|運営者名（レベル2）|任意|システムの運用者名（担当者相当）を入力する|
|6|住所|任意|システムを運営する組織の住所を入力する|
|7|メールアドレス|必須|運用者のメールアドレスを入力する|
|8|電話番号|必須|運用者の電話番号（ハイフン不要）を入力する|　　

4. 「システム情報登録確認」画面にて、入力内容を確認の上、「申請する」ボタンを押下する<br>※入力内容に誤りがある場合は、「キャンセル」ボタンを押下し、3.に戻る　　
5. 「システム情報申請完了」画面にて、登録申請が問題なく完了したことを確認する　　


### 3.2. システムを廃止する　　
　[対象：電子申請システム、法人データストア]<br>
既に登録済みのgBizConnectに接続するシステムの情報を廃止します。　　
1. 「トップメニュー」画面にて、「システム/サービス管理機能」ボタンを押下する
2. 「システム管理」画面にて、廃止対象のシステムの「システム廃止申請」ボタンを押下する　　
3. 「システム廃止申請確認」画面にて、廃止対象であることを確認の上、「廃止する」ボタンを押下する<br>※廃止対象でない場合は、「キャンセル」ボタンを押下して、2.に戻る
4. 「システム廃止申請完了」画面にて、廃止申請が問題なく完了したことを確認する　　



### 3.3. システムの登録・廃止申請の状況を確認する　　
　[対象：電子申請システム、法人データストア]<br>
既に申請済みのシステム登録申請及びシステム廃止申請の処理状況を確認します。　　
1. 「トップメニュー」画面にて、「システム/サービス管理機能」ボタンを押下する　
2. 「システム管理」画面にて、確認対象のシステムの「システムステータス」欄のステータスを確認する<br>
　※各ステータスの詳細は以下のとおり
|#|ステータス|概要|
|:-:|:-|:-|
|1|申請中|電子申請システム開発者または法人データストア開発者が、システム登録申請を行い、基盤管理者が承認審査を行っている状態|
|2|承認済み|基盤管理者が、システム登録申請を承認した状態|
|3|却下|基盤管理者が、システム登録申請を却下した状態|
|4|廃止|電子申請システム開発者または法人データストア開発者が登録したシステムを廃止した状態|　　　　

　
## 4.APIを登録する　　
　[対象：法人データストア]<br>
電子申請システム側へ法人データを提供するためのAPIを登録します。<br>
なお、本章は法人データストア開発者のみが対象であり、基盤管理者からの承認をもって完了（電子申請システム側でAPI利用可能）となります。<br>
また、前提として「3.1システムを登録する」が完了している必要があります。　　

1. 「トップメニュー」画面にて、「システム/サービス管理機能」ボタンを押下する
2. 「システム管理」画面にて、API登録対象のシステムの「API登録」ボタンを押下する
3. 「API情報登録申請」画面にて、登録するAPIに係る以下の項目を入力し、「申請内容の確認」ボタンを押下する　　

|#|項目名|区分|概要|
|:-:|:-|:-|:-|
|1|API名|必須|登録するAPIの名称を入力する<br>・150文字以内で入力ください<br>・空白（半角全角）及び次の文字は利用できません<br>「,./;:\`'"+*?!$&{}<>（）」|
|2|API仕様URL|必須|登録するAPI仕様へアクセスするためのURLを入力する<br>・150文字以内で入力ください|
|3|エンドポイントURI|必須|登録するAPIへアクセスするためのURIを入力する<br>150文字以内で入力ください|
|4|エンドポイントメソッド|必須|登録するAPIのエンドポイントアクセスする際に指定するHTTPメソッドを入力する<br>・大文字（英字）で入力ください|
|5|最終更新日|任意|登録するAPIの最終更新日を入力する<br>※gBizConnect Portalへの登録日ではありません<br>・150文字以内で入力ください<br>・空白（半角全角）及び次の文字は利用できません<br>「,./;:\`'"+*?!$&{}<>（）」|　　

4. 「API情報登録確認」画面にて、入力内容を確認の上、「申請する」ボタンを押下する<br>
　※入力内容に誤りがある場合は、「キャンセル」ボタンを押下し、3.に戻る　　
5. 「API情報登録完了」画面にて、登録申請が問題なく完了したことを確認する　　
6. 「システム管理」画面にて、API仕様ファイルをアップロードする<br>
　※「ファイルを選択」ボタンを押下し、API仕様ファイルの格納先を選択後、「upload」ボタンを押下する　　



## 5. APIの利用申請、承認をする
### 5.1. APIを検索・参照及び利用申請する　　
　[対象：電子申請システム]<br>
　法人データストア開発者が登録したAPIを検索及び利用申請します。　　
1. 「トップメニュー」画面にて、「API検索」ボタンを押下する　　
2. 「API検索」画面にて、テキストエリアに検索するキーワードを入力し、「検索」ボタンを押下する<br>
　※キーワードによる部分一致検索　　
3.  入力したキーワードに部分一致したAPIが表示されるため、検索及び参照目的のAPIであることを確認の上、「利用申請」ボタンを押下する<br>
4. 「API利用申請」画面にて、利用申請に係る以下の項目を入力し、「申請内容の確認」ボタンを押下する　　

|#|項目名|区分|概要|
|:-:|:-|:-|:-|
|1|申請元システム名|必須|ドロップダウンリストから申請元のシステム名を選択する<br>※ログインしているユーザに紐づいたシステム名が表示されます|
|2|連絡事項|任意|利用申請の理由等、承認者（当該APIの登録を行った法人データストア開発者）への連絡事項を入力する<br>・200文字以内で入力ください<br>・次の文字は利用できません<br>「,./;:\`'"+*?!$&{}<>（）」|　　

5. 同画面にて、入力内容を確認の上、「申請する」ボタンを押下する　　
6. 「API利用申請完了」画面にて、利用申請が問題なく完了したことを確認する

### 5.2. APIの利用申請状況を確認する　　
　[対象：電子申請システム]<br>　　
「5.1章」にて行ったAPI利用申請の申請状況を確認します。　　
1. 「トップメニュー」画面にて、「利用管理」ボタンを押下する　　
2. 「API利用管理」画面にて、確認対象の「APIステータス」欄を確認する<br>
※各ステータスの詳細は以下のとおり

|#|ステータス|概要|
|:-:|:-|:-|
|1|申請中|電子申請システム開発者がAPIの利用申請を行い、当該APIを登録した法人データストア開発者が承認審査を行っている状態|
|2|承認済み|当該APIを登録した法人データストア開発者が、電子申請システム開発者からのAPI利用申請を承認した状態|
|3|却下|当該APIを登録した法人データストア開発者が、電子申請システム開発者からのAPI利用申請を却下した状態<br>当該状態の場合は、必要に応じて却下理由等を当該APIを登録した法人データストア開発者へ確認すること|


### 5.3. 受付けたAPIの利用申請を承認する　　
　[対象：法人データストア]<br>
　電子申請システム開発者からAPIの利用申請を受付け、それを承認します。<br>　　
前提として、「4.APIを登録する」が完了している必要があります。
1. 「トップメニュー」画面にて、「システム／サービス管理機能」ボタンを押下する
2. 「システム管理」画面にて、承認対象のシステムの「利用申請一覧」ボタンを押下する
3. 「API利用申請承認」画面にて、申請内容を確認の上、「承認」ボタンを押下する
4. 「API利用申請承認完了」画面にて、承認が問題なく完了したことを確認する　　



## 6. 法人データ連携を行う　　
### 6.1. gBizConnect Nodeを導入する　　
　[対象電子申請システム、法人データストア]<br>
gBizConnect Nodeの導入方法については、「gBizConnect Node導入マニュアル」を参照してください。　　

### 6.2. gBizConnect Nodeの設定ファイルを取得・適用する　　
　[対象：電子申請システム、法人データストア]<br>　　
gBizConnect Nodeに設定するためのファイルを取得します。<br>
　　なお、本設定ファイルは、登録したシステム単位の内容であり、APIの利用申請及び承認の都度、再度取得し、gBizConnect Nodeに適用する必要があります。
1. 「トップメニュー」画面にて、「システム／サービス管理機能」ボタンを押下する　　
2. 「システム管理」画面にて、「ダウンロード」ボタンを押下し、設定ファイルを取得する<br>
※取得した設定ファイルの適用方法については「gBizConnect Node導入マニュアル」を参照してください。

### 6.3.　法人データ連携を行う　　
　[対象：電子申請システム、法人データストア]<br>
　gBizConnectを介した情報連携を実施するための方法や仕様については、「gBizConnect Node仕様書」を参照してください。


## 7. その他機能を活用する　　
### 7.1.  統計情報を取得する　　
　[対象：電子申請システム、法人データストア]  
 各電子申請システム及び法人データストアのgBizConnect Nodeから収集したログ情報に基づき、統計情報等を取得することができます。<br>
 なお、本機能は、OSSのBIツールである「Kibana」を活用しております。<br>

 * データ連携回数の遷移（一定期間ごと、APIごと、接続システムごと）　　
 * ターンアラウンドタイムの遷移（一定期間ごと、APIごと、接続システムごと）
 * 個別のデータ連携に係るログ（日時等の通信ログ、処理ステータス、連携先gBizConnect Nodeのログ情報等）
 * エラー発生時のエラー詳細情報（日時等の通信ログ、処理ステータス、エラー発生箇所、連携先gBizConnect Nodeのログ情報等）　　

確認方法は以下のとおりです。　
* **CSVファイル形式で確認する場合**
1. 「トップメニュー」画面にて、「ログ管理/保存機能」ボタンを押下する
2. 「CSVダウンロード」画面にて、確認対象の条件（ログステータス、開始日、終了日）を入力し、「CSVダウンロード」ボタンを押下する
3. ダウンロードしたZIPファイルを展開し、CSVファイルを確認する　　


* **BIツール「Kibana」で確認する場合**  
「Kibana」の操作方法については、[公式サイト](https://www.elastic.co/jp/kibana)をご確認ください　　

1. 「トップメニュー」画面にて、「ログ管理/保存機能」ボタンを押下する
2. 「CSVダウンロード」画面にて、「Kibana起動」ボタンを押下する<br> ※条件（ログステータス、開始日、終了日）の入力は不要です（起動時に引き継がれません）
3. Kibanaの「Home」画面にて、画面左側メニューから「Visualize」ボタンを押下する
4. Kibanaの「Visualize」画面にて、「＋」ボタンを押下し、可視化したいグラフのタイプを選択する
5. Index pattern（ログ情報のデータセット）を選択する
6. 可視化したい内容に応じて、「X-Axis（X軸）」及び「Y-Axis（Y軸）」を任意に設定し、「apply changes」ボタンを押下する
7. グラフ化された内容を確認する
